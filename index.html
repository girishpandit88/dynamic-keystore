<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Dynamic-keystore by girishpandit88</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Dynamic-keystore</h1>
      <h2 class="project-tagline">easing the pain of handling application configurations</h2>
      <a href="https://github.com/girishpandit88/dynamic-keystore" class="btn">View on GitHub</a>
      <a href="https://github.com/girishpandit88/dynamic-keystore/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/girishpandit88/dynamic-keystore/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="dynamic-keystore" class="anchor" href="#dynamic-keystore" aria-hidden="true"><span class="octicon octicon-link"></span></a>dynamic-keystore</h1>

<p>A service module that you can include in your services. It provides you with ways to dynamically pull your application/service configs from DynamoDB. Advantage over other similar services is that you manage your own configurations. Other advantage being, you can pretty much store your entire config in DynamoDB using this module. So your applications/services can be configuration free.</p>

<p>To get started</p>

<pre><code>$ git clone
$ mvn clean compile install
</code></pre>

<p>Then in you pom.xml include it as a dependency</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.gp.dynamic-keystore&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;dynamic-keystore&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.0.0-SNAPSHOT&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<p>Finally in your injector binding class initialize as show below. The DynamicKeystoreModule takes DynamoDB endpoint and a config table prefix. Pass empty strings if you want to use AWS DynamoDB endpoint and don't want to have a table prefix</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Guice</span><span class="pl-k">.</span>createInjector(<span class="pl-k">new</span> <span class="pl-smi">DynamicKeystoreModule</span>(<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>));</pre></div>

<p>Then you can get your configs dynamically using something like below</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ConfigService</span> _service <span class="pl-k">=</span> injector<span class="pl-k">.</span>getInstance(<span class="pl-smi">ConfigService</span><span class="pl-k">.</span>class);
<span class="pl-smi">String</span> propertyAsString <span class="pl-k">=</span> _service<span class="pl-k">.</span>getConfig(<span class="pl-s"><span class="pl-pds">"</span>service_name<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>service_environment<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>get();</pre></div>

<p>You can also get a TypeSafe Config object as a config property</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Config</span> propertiesAsTypeSafeConfig <span class="pl-k">=</span> _service<span class="pl-k">.</span>getConfigs(<span class="pl-s"><span class="pl-pds">"</span>service_name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>service_environment<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>get();</pre></div>

<p>To save config you can use</p>

<div class="highlight highlight-source-java"><pre>_service<span class="pl-k">.</span>putConfig(<span class="pl-s"><span class="pl-pds">"</span>service_name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>service_environment<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>);</pre></div>

<p>Since value is a String, you can even save your keystore/crt/pfx files and retrieve them.</p>

<div class="highlight highlight-source-java"><pre>_service<span class="pl-k">.</span>setConfig(<span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>dev<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>config.file<span class="pl-pds">"</span></span>,config<span class="pl-k">.</span>getConfig(<span class="pl-s"><span class="pl-pds">"</span>dynamo<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>toString());</pre></div>

<p>To delete config, use</p>

<div class="highlight highlight-source-java"><pre>_service<span class="pl-k">.</span>deleteConfig(<span class="pl-s"><span class="pl-pds">"</span>service_name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>service_environment<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span>);</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/girishpandit88/dynamic-keystore">Dynamic-keystore</a> is maintained by <a href="https://github.com/girishpandit88">girishpandit88</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
